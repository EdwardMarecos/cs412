<!-- 
inherits from base.html. This template will 
render a profile page for one user (i.e., a 
single Profile record).
Display a larger-format image, and display all 
the data attributes stored in the Profile record. 
formatting was that of which i found aesthetically
pleasing.
-->

<!-- templates/mini_fb/show_profile.html -->

{% extends 'mini_fb/base.html' %}

{% block content %}
<div class="container" style="display: flex; flex-wrap: wrap; gap: 20px; align-items: center;">
    <!-- Profile Image -->
    <div style="flex: 1 1 150px; max-width: 300px;">
        <img src="{{ profile.get_profile_image }}" alt="Profile Image"
            style="width: 100%; height: auto; border-radius: 15px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
    </div>
    
    <!-- Profile Information -->
    <div style="flex: 2; max-width: 600px;">
        <h2 style="color: #4A90E2;">{{ profile.first_name }} {{ profile.last_name }}</h2>
        <p><strong>Birthdate:</strong> {{ profile.birth_date }}</p>
        <p><strong>City:</strong> {{ profile.city }}</p>
        <p><strong>Email:</strong> {{ profile.email_address }}</p>
        
        <!-- Link to create a new status message -->
        <a href="{% url 'create_status' profile.pk %}" style="
            display: inline-block;
            margin-top: 20px;
            padding: 10px 15px;
            background-color: #42A5F5;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        " onmouseover="this.style.backgroundColor='#1E88E5';"
        onmouseout="this.style.backgroundColor='#42A5F5';">Post a Status Message</a>
        <!-- Link to Update Profile -->
        <a href="{% url 'update_profile' pk=profile.pk %}" style="
        display: inline-block;
        margin-top: 10px;
        padding: 10px 15px;
        background-color: #FFC107;
        color: black;
        text-decoration: none;
        border-radius: 5px;
        transition: background-color 0.3s ease;" 
        onmouseover="this.style.backgroundColor='#FFB300';" 
        onmouseout="this.style.backgroundColor='#FFC107';">
        Update Profile</a>
    </div>


    <!-- Penguin GIF Image -->
    <div style="flex: 1 1 150px; max-width: 300px; align-self: center;">
        <img src="https://i.gifer.com/origin/39/39f78ed05b58bd9fa3962034d7907c07_w200.gif" alt="Penguin GIF" style="width: 100%; height: auto; border-radius: 15px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
    </div>
</div>

<!-- Existing Status Messages Section -->
<div class="container" style="margin-top: 30px;">
    <h3 style="color: #1976D2;">Status Messages</h3>

    {% for message in profile.get_status_messages %}
    <div style="
        margin-bottom: 15px; 
        padding: 10px; 
        background-color: #f9f9f9; 
        border-radius: 10px; 
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); 
        display: flex; 
        justify-content: space-between; 
        align-items: center;">
        
        <!-- Status Message Text -->
        <div style="flex: 1;">
            <p>
                {{ message.message }} <br>
            </p>
            <!-- date/time and Action Buttons (Edit/Delete) -->
            <div style="
                display: flex;
                gap: 10px; 
                margin-top: auto; 
                bottom: 0; 
                position: relative;">
                
                <strong>{{ message.timestamp|date:"F d, Y h:i A" }}:</strong> 
                
                <!-- Edit Button -->
                <a href="{% url 'update_status' profile.pk message.pk %}" style="
                    background-color: #42A5F5; 
                    color: white; 
                    padding: 5px 10px; 
                    border-radius: 5px; 
                    text-decoration: none; 
                    font-size: 14px;">
                    Edit
                </a>

                <!-- Delete Button -->
                <a href="{% url 'remove_status' profile.pk message.pk %}" style="
                    background-color: #D32F2F; 
                    color: white; 
                    padding: 5px 10px; 
                    border-radius: 5px; 
                    text-decoration: none; 
                    font-size: 14px;">
                    Delete
                </a>
                
            </div>
        </div>

        <!-- Images Section -->
        <div style="display: flex; flex-direction: column; gap: 10px; margin-left: 20px;">
            {% for img in message.get_images %}
            <div style="max-width: 200px;">
                <img src="{{ img.image.url }}" alt="Status Image" 
                     style="width: 100%; height: auto; border-radius: 10px; 
                            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
                <p style="text-align: center; font-size: 0.9em;">
                    <small>{{ img.timestamp|date:"F d, Y H:i" }}</small>
                </p>
            </div>
            {% endfor %}
        </div>
    </div>
    {% empty %}
    <p>No status messages yet. Be the first to post one!</p>
    {% endfor %}

    <!-- Show Friends Section -->
    <div class="container" style="margin-top: 30px;">
        <h3 style="color: #1976D2;">Friends</h3>

        {% if profile.get_friends %}
            <div style="display: flex; flex-wrap: wrap; gap: 15px;">
                {% for friend in profile.get_friends %}
                    <div style="
                        width: 100px; 
                        text-align: center; 
                        background-color: #f9f9f9;
                        padding: 10px; 
                        border-radius: 10px; 
                        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                    ">
                        <!-- Friend's Profile Picture -->
                        <a href="{% url 'show_profile' friend.pk %}">
                            <img src="{{ friend.get_profile_image }}" 
                                alt="{{ friend.first_name }} {{ friend.last_name }}" 
                                style="
                                    width: 80px; 
                                    height: 80px; 
                                    border-radius: 15px; 
                                    object-fit: cover; 
                                    margin-bottom: 5px;
                                ">
                        </a>
                        <!-- Friend's Name -->
                        <a href="{% url 'show_profile' friend.pk %}" style="
                            display: block;
                            text-decoration: none;
                            color: #4A90E2;
                            font-weight: bold;
                            font-size: 14px;
                            margin-top: 5px;
                        ">
                            {{ friend.first_name }} {{ friend.last_name }}
                        </a>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>This user has no friends yet.</p>
        {% endif %}
    </div>
</div>

{% endblock %}
